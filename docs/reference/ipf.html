<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Iterative Proportional Fitting — ipf • surveysd</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Iterative Proportional Fitting — ipf" />

<meta property="og:description" content="Adjust sampling weights to given totals based on household-level and/or
individual level constraints." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">surveysd</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/surveysd.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/error_estimation.html">Error estimation</a>
    </li>
    <li>
      <a href="../articles/methodology.html">Methodology</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/statistikat/surveysd">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Iterative Proportional Fitting</h1>
    <small class="dont-index">Source: <a href='https://github.com/statistikat/surveysd/blob/master/R/ipf.r'><code>R/ipf.r</code></a></small>
    <div class="hidden name"><code>ipf.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Adjust sampling weights to given totals based on household-level and/or
individual level constraints.</p>
    
    </div>

    <pre class="usage"><span class='fu'>ipf</span>(<span class='no'>dat</span>, <span class='kw'>hid</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>conP</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>conH</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>epsP</span> <span class='kw'>=</span> <span class='fl'>1e-06</span>,
  <span class='kw'>epsH</span> <span class='kw'>=</span> <span class='fl'>0.01</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>w</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>bound</span> <span class='kw'>=</span> <span class='fl'>4</span>,
  <span class='kw'>maxIter</span> <span class='kw'>=</span> <span class='fl'>200</span>, <span class='kw'>meanHH</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>allPthenH</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>returnNA</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>looseH</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>numericalWeighting</span> <span class='kw'>=</span> <span class='no'>computeLinear</span>,
  <span class='kw'>check_hh_vars</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>conversion_messages</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat</th>
      <td><p>a <code>data.table</code> containing household ids (optionally), base
weights (optionally), household and/or personal level variables (numerical
or categorical) that should be fitted.</p></td>
    </tr>
    <tr>
      <th>hid</th>
      <td><p>name of the column containing the household-ids
within <code>dat</code> or NULL if such a variable does not exist.</p></td>
    </tr>
    <tr>
      <th>conP</th>
      <td><p>list or (partly) named list defining the constraints on person
level.  The list elements are contingency tables in array representation
with dimnames corresponding to the names of the relevant calibration
variables in <code>dat</code>. If a numerical variable is to be calibrated, the
respective list element has to be named with the name of that numerical
variable. Otherwise the list element shoud NOT be named.</p></td>
    </tr>
    <tr>
      <th>conH</th>
      <td><p>list or (partly) named list defining the constraints on
household level.  The list elements are contingency tables in array
representation with dimnames corresponding to the names of the relevant
calibration variables in <code>dat</code>. If a numerical variable is to be
calibrated, the respective list element has to be named with the name of
that numerical variable. Otherwise the list element shoud NOT be named.</p></td>
    </tr>
    <tr>
      <th>epsP</th>
      <td><p>numeric value or list (of numeric values and/or arrays)
specifying the convergence limit(s) for <code>conP</code>. The list can contain
numeric values and/or arrays which must appear in the same order as the
corresponding constraints in <code>conP</code>. Also, an array must have the same
dimensions and dimnames as the corresponding constraint in <code>conP</code>.</p></td>
    </tr>
    <tr>
      <th>epsH</th>
      <td><p>numeric value or list (of numeric values and/or arrays)
specifying the convergence limit(s) for <code>conH</code>. The list can contain
numeric values and/or arrays which must appear in the same order as the
corresponding constraints in <code>conH</code>. Also, an array must have the same
dimensions and dimnames as the corresponding constraint in <code>conH</code>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>if TRUE, some progress information will be printed.</p></td>
    </tr>
    <tr>
      <th>w</th>
      <td><p>name if the column containing the base
weights within <code>dat</code> or NULL if such a variable does not exist. In the
latter case, every observation in <code>dat</code> is assigned a starting weight
of 1.</p></td>
    </tr>
    <tr>
      <th>bound</th>
      <td><p>numeric value specifying the multiplier for determining the
weight trimming boundary if the change of the base weights should be
restricted, i.e. if the weights should stay between 1/<code>bound</code>*<code>w</code>
and <code>bound</code>*<code>w</code>.</p></td>
    </tr>
    <tr>
      <th>maxIter</th>
      <td><p>numeric value specifying the maximum number of iterations
that should be performed.</p></td>
    </tr>
    <tr>
      <th>meanHH</th>
      <td><p>if TRUE, every person in a household is assigned the mean of
the person weights corresponding to the household. If <code>"geometric"</code>, the geometric mean
is used rather than the arithmetic mean.</p></td>
    </tr>
    <tr>
      <th>allPthenH</th>
      <td><p>if TRUE, all the person level calibration steps are performed before the houshold level calibration steps (and <code>meanHH</code>, if specified).
If FALSE, the houshold level calibration steps (and <code>meanHH</code>, if specified) are performed after everey person level calibration step.
This can lead to better convergence properties in certain cases but also means that the total number of calibration steps is increased.</p></td>
    </tr>
    <tr>
      <th>returnNA</th>
      <td><p>if TRUE, the calibrated weight will be set to NA in case of no convergence.</p></td>
    </tr>
    <tr>
      <th>looseH</th>
      <td><p>if FALSE, the actual constraints <code>conH</code> are used for calibrating all the hh weights.
If TRUE, only the weights for which the lower and upper thresholds defined by <code>conH</code> and <code>epsH</code> are exceeded
are calibrated. They are however not calibrated against the actual constraints <code>conH</code> but against
these lower and upper thresholds, i.e. <code>conH</code>-<code>conH</code>*<code>epsH</code> and <code>conH</code>+<code>conH</code>*<code>epsH</code>.</p></td>
    </tr>
    <tr>
      <th>numericalWeighting</th>
      <td><p>See <a href='computeFrac.html'>numericalWeighting</a></p></td>
    </tr>
    <tr>
      <th>check_hh_vars</th>
      <td><p>If <code>TRUE</code> check for non-unique values inside of a household for variables in
household constraints</p></td>
    </tr>
    <tr>
      <th>conversion_messages</th>
      <td><p>show a message, if inputs need to be reformatted. This can be useful for speed
optimizations if ipf is called several times with similar inputs (for example bootstrapping)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function will return the input data <code>dat</code> with the
calibrated weights <code>calibWeight</code> as an additional column as well as attributes. If no convergence has been reached in <code>maxIter</code>
steps, and <code>returnNA</code> is <code>TRUE</code> (the default), the column <code>calibWeights</code> will only consist of <code>NA</code>s. The attributes of the table are
attributes derived from the <code>data.table</code> class as well as the following.</p><table class='table'>
<tr><td></td><td><code>converged</code></td></tr>
<tr><td></td><td>Did the algorithm converge in</td></tr>
<tr><td><code>maxIter</code></td><td>steps?</td></tr>
<tr><td></td><td><code>iterations</code></td></tr>
<tr><td></td><td>The number of iterations performed.</td></tr>
<tr><td></td><td><code>conP</code></td></tr>
<tr><td>,</td><td><code>conH</code></td></tr>
<tr><td>,</td><td><code>epsP</code></td></tr>
<tr><td>,</td><td><code>epsH</code></td></tr>
<tr><td></td><td>See Arguments.</td></tr>
<tr><td></td><td><code>conP_adj</code></td></tr>
<tr><td>,</td><td><code>conH_adj</code></td></tr>
<tr><td></td><td>Adjusted versions of</td></tr>
<tr><td><code>conP</code></td><td>and</td></tr>
<tr><td><code>conH</code></td><td></td></tr>
<tr><td></td><td><code>formP</code></td></tr>
<tr><td>,</td><td><code>formH</code></td></tr>
<tr><td></td><td>Formulas that were used to calculate</td></tr>
<tr><td><code>conP_adj</code></td><td>and</td></tr>
<tr><td><code>conH_adj</code></td><td>based on the output table.</td></tr>
</table>


    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function implements the weighting procedure described
<a href='http://www.ajs.or.at/index.php/ajs/article/viewFile/doi10.17713ajs.v45i3.120/512'>here</a>.</p>
<p><code>conP</code> and <code>conH</code> are contingency tables, which can be created with <code>xtabs</code>. The <code>dimnames</code> of those
tables should match the names and levels of the corresponding columns in <code>dat</code>.</p>
<p><code>maxIter</code>, <code>epsP</code> and <code>epsH</code> are the stopping criteria. <code>epsP</code> and <code>epsH</code> describe relative tolerances
in the sense that
\deqn{1-epsP < \frac{w_{i+1}}{w_i} < 1+epsP}{1-epsP < w(i+1)/w(i) < 1+epsP} 
will be used as convergence criterium. Here i is the iteration step and wi is the weight of a
specific person at step i.</p>
<p>The algorithm
performs best if all varables occuring in the constraints (<code>conP</code> and <code>conH</code>) as well as the
household variable are coded as <code>factor</code>-columns in <code>dat</code>. Otherwise, conversions will be necessary
which can be monitored with the <code>conversion_messages</code> argument.
Setting <code>check_hh_vars</code> to <code>FALSE</code> can also incease the performance of the scheme.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://www.rdocumentation.org/packages/simPop/topics/ipu'>ipu</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>eusilcS</span>,<span class='kw'>package</span><span class='kw'>=</span><span class='st'>"simPop"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>data.table</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/data.table/topics/setDT'>setDT</a></span>(<span class='no'>eusilcS</span>)
<span class='no'>eusilcS</span> <span class='kw'>&lt;-</span> <span class='no'>eusilcS</span>[, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>db030</span>,<span class='no'>hsize</span>,<span class='no'>db040</span>,<span class='no'>age</span>,<span class='no'>rb090</span>,<span class='no'>netIncome</span>,<span class='no'>db090</span>,<span class='no'>rb050</span>)]

<span class='co'>## rename columns</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/data.table/topics/setattr'>setnames</a></span>(<span class='no'>eusilcS</span>, <span class='st'>"rb090"</span>, <span class='st'>"gender"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/data.table/topics/setattr'>setnames</a></span>(<span class='no'>eusilcS</span>, <span class='st'>"db040"</span>, <span class='st'>"state"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/data.table/topics/setattr'>setnames</a></span>(<span class='no'>eusilcS</span>, <span class='st'>"db030"</span>, <span class='st'>"household"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/data.table/topics/setattr'>setnames</a></span>(<span class='no'>eusilcS</span>, <span class='st'>"rb050"</span>, <span class='st'>"weight"</span>)

<span class='co'>## some recoding</span>
<span class='co'># generate age groups</span>
<span class='no'>eusilcS</span>[, <span class='no'>agegroup</span> <span class='kw'>:=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/cut'>cut</a></span>(<span class='no'>age</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(-<span class='fl'>Inf</span>, <span class='fl'>10</span>*<span class='fl'>1</span>:<span class='fl'>9</span>, <span class='fl'>Inf</span>), <span class='kw'>right</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)]
<span class='co'># some recoding of netIncome for reasons of simplicity</span>
<span class='no'>eusilcS</span>[<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/NA'>is.na</a></span>(<span class='no'>netIncome</span>), <span class='no'>netIncome</span> <span class='kw'>:=</span> <span class='fl'>0</span>]
<span class='no'>eusilcS</span>[<span class='no'>netIncome</span> <span class='kw'>&lt;</span> <span class='fl'>0</span>, <span class='no'>netIncome</span> <span class='kw'>:=</span> <span class='fl'>0</span>]
<span class='co'># set hsize to 1,...,5+</span>
<span class='no'>eusilcS</span>[, <span class='no'>hsize</span> <span class='kw'>:=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/cut'>cut</a></span>(<span class='no'>hsize</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>:<span class='fl'>4</span>, <span class='fl'>Inf</span>), <span class='kw'>labels</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>:<span class='fl'>4</span>, <span class='st'>"5+"</span>))]
<span class='co'># treat households as a factor variable</span>
<span class='no'>eusilcS</span>[, <span class='no'>household</span> <span class='kw'>:=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/factor'>as.factor</a></span>(<span class='no'>household</span>)]

<span class='co'>## example for base weights assuming a simple random sample of households stratified per region</span>
<span class='no'>eusilcS</span>[, <span class='no'>regSamp</span> <span class='kw'>:=</span> <span class='no'>.N</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='no'>state</span>]
<span class='no'>eusilcS</span>[, <span class='no'>regPop</span> <span class='kw'>:=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sum'>sum</a></span>(<span class='no'>weight</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='no'>state</span>]
<span class='no'>eusilcS</span>[, <span class='no'>baseWeight</span> <span class='kw'>:=</span> <span class='no'>regPop</span>/<span class='no'>regSamp</span>]

<span class='co'>## constraints on person level</span>
<span class='co'># age</span>
<span class='no'>conP1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/xtabs'>xtabs</a></span>(<span class='no'>weight</span> ~ <span class='no'>agegroup</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>eusilcS</span>)
<span class='co'># gender by region</span>
<span class='no'>conP2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/xtabs'>xtabs</a></span>(<span class='no'>weight</span> ~ <span class='no'>gender</span> + <span class='no'>state</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>eusilcS</span>)
<span class='co'># personal net income by gender</span>
<span class='no'>conP3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/xtabs'>xtabs</a></span>(<span class='no'>weight</span>*<span class='no'>netIncome</span> ~ <span class='no'>gender</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>eusilcS</span>)

<span class='co'>## constraints on household level</span>
<span class='no'>conH1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/xtabs'>xtabs</a></span>(<span class='no'>weight</span> ~ <span class='no'>hsize</span> + <span class='no'>state</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>eusilcS</span>, <span class='kw'>subset</span> <span class='kw'>=</span> !<span class='fu'><a href='https://www.rdocumentation.org/packages/data.table/topics/duplicated'>duplicated</a></span>(<span class='no'>household</span>))

<span class='co'># array of convergence limits for conH1</span>
<span class='no'>epsH1</span> <span class='kw'>&lt;-</span> <span class='no'>conH1</span>
<span class='no'>epsH1</span>[<span class='fl'>1</span>:<span class='fl'>4</span>,] <span class='kw'>&lt;-</span> <span class='fl'>0.005</span>
<span class='no'>epsH1</span>[<span class='st'>"5+"</span>,] <span class='kw'>&lt;-</span> <span class='fl'>0.2</span>

<span class='co'># without array epsH1</span>

<span class='no'>calibweights1</span> <span class='kw'>&lt;-</span> <span class='fu'>ipf</span>(<span class='no'>eusilcS</span>, <span class='kw'>hid</span> <span class='kw'>=</span> <span class='st'>"household"</span>,
                      <span class='kw'>conP</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>conP1</span>, <span class='no'>conP2</span>, <span class='kw'>netIncome</span> <span class='kw'>=</span> <span class='no'>conP3</span>),
                      <span class='kw'>conH</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>conH1</span>),
                      <span class='kw'>epsP</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='fl'>1e-06</span>, <span class='fl'>1e-06</span>, <span class='fl'>1e-03</span>),
                      <span class='kw'>epsH</span> <span class='kw'>=</span> <span class='fl'>0.01</span>,
                      <span class='kw'>bound</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,  <span class='kw'>maxIter</span> <span class='kw'>=</span> <span class='fl'>200</span>)

<span class='co'># with array epsH1, base weights and bound</span>
<span class='no'>calibweights2</span> <span class='kw'>&lt;-</span> <span class='fu'>ipf</span>(<span class='no'>eusilcS</span>, <span class='kw'>hid</span> <span class='kw'>=</span> <span class='st'>"household"</span>,
                      <span class='kw'>conP</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>conP1</span>, <span class='no'>conP2</span>),
                      <span class='kw'>conH</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>conH1</span>),
                      <span class='kw'>epsP</span> <span class='kw'>=</span> <span class='fl'>1e-06</span>,
                      <span class='kw'>epsH</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>epsH1</span>),
                      <span class='kw'>w</span> <span class='kw'>=</span> <span class='st'>"baseWeight"</span>,
                      <span class='kw'>bound</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>maxIter</span> <span class='kw'>=</span> <span class='fl'>200</span>)

<span class='co'># show an adjusted version of conP and the original</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/attr'>attr</a></span>(<span class='no'>calibweights2</span>, <span class='st'>"conP_adj"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/attr'>attr</a></span>(<span class='no'>calibweights2</span>, <span class='st'>"conP"</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Alexander Kowarik, Gregor de Cillia</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Johannes Gussenbauer, Alexander Kowarik, Gregor de Cillia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

