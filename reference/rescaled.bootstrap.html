<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Draw bootstrap replicates — rescaled.bootstrap • surveysd</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Draw bootstrap replicates — rescaled.bootstrap"><meta name="description" content="Draw bootstrap replicates from survey data using either the rescaled
bootstrap for stratified multistage sampling, presented by J. Preston
(2009) or the Rao-Wu boostrap by J. N. K. Rao and C. F. J. Wu (1988)"><meta property="og:description" content="Draw bootstrap replicates from survey data using either the rescaled
bootstrap for stratified multistage sampling, presented by J. Preston
(2009) or the Rao-Wu boostrap by J. N. K. Rao and C. F. J. Wu (1988)"><meta property="og:image" content="https://statistikat.github.io/surveysd/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">surveysd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/surveysd.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/error_estimation.html">Error estimation</a></li>
    <li><a class="dropdown-item" href="../articles/ipf.html">Iterative Proportional Fitting</a></li>
    <li><a class="dropdown-item" href="../articles/methodology.html">Methodology</a></li>
    <li><a class="dropdown-item" href="../articles/raowu.html">Rao-Wu Bootstrap in surveysd</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statistikat/surveysd/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Draw bootstrap replicates</h1>
      <small class="dont-index">Source: <a href="https://github.com/statistikat/surveysd/blob/master/R/rescaled.bootstrap.R" class="external-link"><code>R/rescaled.bootstrap.R</code></a></small>
      <div class="d-none name"><code>rescaled.bootstrap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Draw bootstrap replicates from survey data using either the rescaled
bootstrap for stratified multistage sampling, presented by J. Preston
(2009) or the Rao-Wu boostrap by J. N. K. Rao and C. F. J. Wu (1988)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rescaled.bootstrap</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Preston"</span>, <span class="st">"Rao-Wu"</span><span class="op">)</span>,</span>
<span>  REP <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  strata <span class="op">=</span> <span class="st">"DB050&gt;1"</span>,</span>
<span>  cluster <span class="op">=</span> <span class="st">"DB060&gt;DB030"</span>,</span>
<span>  fpc <span class="op">=</span> <span class="st">"N.cluster&gt;N.households"</span>,</span>
<span>  single.PSU <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"merge"</span>, <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>  return.value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"replicates"</span><span class="op">)</span>,</span>
<span>  run.input.checks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  already.selected <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dat">dat<a class="anchor" aria-label="anchor" href="#arg-dat"></a></dt>
<dd><p>either data frame or data table containing the survey sample</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>for bootstrap replicates, either <code>"Preston"</code> or <code>"Rao-Wu"</code></p></dd>


<dt id="arg-rep">REP<a class="anchor" aria-label="anchor" href="#arg-rep"></a></dt>
<dd><p>integer indicating the number of bootstraps to be drawn</p></dd>


<dt id="arg-strata">strata<a class="anchor" aria-label="anchor" href="#arg-strata"></a></dt>
<dd><p>string specifying the column name in <code>dat</code> that is used for
stratification. For multistage sampling multiple column names can be
specified by <code>strata=c("strata1","strata2","strata3")</code> or
<code>strata=c("strata1&gt;strata2&gt;strata3")</code>. See Details for more
information.</p></dd>


<dt id="arg-cluster">cluster<a class="anchor" aria-label="anchor" href="#arg-cluster"></a></dt>
<dd><p>string specifying the column name in <code>dat</code> that is used for
clustering. For instance given a household sample the column containing
the household ID should be supplied.
For multistage sampling multiple column names can be specified
by <code>cluster=c("cluster1","cluster2","cluster3")</code> or
<code>cluster=c("cluster1&gt;cluster2&gt;cluster3")</code>.
See Details for more information.</p></dd>


<dt id="arg-fpc">fpc<a class="anchor" aria-label="anchor" href="#arg-fpc"></a></dt>
<dd><p>string specifying the column name in <code>dat</code> that contains the
number of PSUs at the first stage. For multistage sampling the number of
PSUs at each stage must be specified by <code>strata=c("fpc1","fpc2","fpc3")</code>
or <code>strata=c("fpc1&gt;fpc2&gt;fpc3")</code>.</p></dd>


<dt id="arg-single-psu">single.PSU<a class="anchor" aria-label="anchor" href="#arg-single-psu"></a></dt>
<dd><p>either "merge" or "mean" defining how single PSUs need to
be dealt with. For <code>single.PSU="merge"</code> single PSUs at each stage are
merged with the strata or cluster with the next least number of PSUs. If
multiple of those exist one will be select via random draw. For
<code>single.PSU="mean"</code> single PSUs will get the mean over all bootstrap
replicates at the stage which did not contain single PSUs.</p></dd>


<dt id="arg-return-value">return.value<a class="anchor" aria-label="anchor" href="#arg-return-value"></a></dt>
<dd><p>either "data", "replicates" and/or "selection"
specifying the return value of the function. For "data" the survey data is
returned as class <code>data.table</code>, for "replicates" only the bootstrap replicates
are returned as <code>data.table</code>. For "selection" list of data.tables with
length of <code>length(strata)</code> is returned containing 1:<code>REP</code> 0-1 columns
indicating if a PSU was selected for each sampling stage.</p></dd>


<dt id="arg-run-input-checks">run.input.checks<a class="anchor" aria-label="anchor" href="#arg-run-input-checks"></a></dt>
<dd><p>logical, if TRUE the input will be checked before applying
the bootstrap procedure</p></dd>


<dt id="arg-already-selected">already.selected<a class="anchor" aria-label="anchor" href="#arg-already-selected"></a></dt>
<dd><p>list of data.tables or <code>NULL</code> where each data.table contains
columns in <code>cluster</code>, <code>strata</code> and additionally 1:<code>REP</code> columns containing
0-1 values which indicate if a PSU was selected for each bootstrap replicate.
Each of the data.tables corresponds to one of the sampling stages. First entry
in the list corresponds to the first sampling stage and so on.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>integer specifying the seed for the random number generator.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>returns the complete data set including the bootstrap replicates or
just the bootstrap replicates, depending on <code>return.value="data"</code> or
<code>return.value="replicates"</code> respectively.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For specifying multistage sampling designs the column names in
<code>strata</code>,<code>cluster</code> and <code>fpc</code> need to be seperated by "&gt;".<br>
For multistage sampling the strings are read from left to right meaning that
the first vector entry or column name before the first "&gt;" is taken as the column for
stratification/clustering/number of PSUs at the first and the last vector entry
or column after
the last "&gt;" is taken as the column for stratification/clustering/number of
PSUs at the last stage.
If for some stages the sample was not stratified or clustered one must
specify this by "1" or "I", e.g. <code>strata=c("strata1","I","strata3")</code> or
<code>strata=c("strata1&gt;I&gt;strata3")</code> if there was
no stratification at the second stage or
<code>cluster=c("cluster1","cluster2","I")</code> respectively
<code>cluster=c("cluster1&gt;cluster2&gt;I")</code>
if there were no clusters at the last stage.<br>
The number of PSUs at each stage is not calculated internally and must be
specified for any sampling design.
For single stage sampling using stratification this can usually be done by
adding over all sample weights of each PSU by each strata-code.<br>
Spaces in each of the strings will be removed, so if column names contain
spaces they should be renamed before calling this procedure!<br>
If <code>already.selected</code> is supplied the sampling of bootstrap replicates
considers if speficif PSUs have already been selected by a previous survey wave.
For a specific <code>strata</code> and <code>cluster</code> this could lead to more than <code>floor(n/2)</code>
records selected. In that case records will be de-selected such that <code>floor(n/2)</code> records,
with <code>n</code> as the total number of records, are selected for each
<code>strata</code> and <code>cluster</code>. This parameter ist mostly used by <a href="draw.bootstrap.html">draw.bootstrap</a> in
order to consider the rotation of the sampling units over time.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Preston, J. (2009). Rescaled bootstrap for stratified multistage
sampling. Survey Methodology. 35. 227-234.
Rao, J. N. K., and C. F. J. Wu. (1988). Resampling Inference with Complex Survey Data.
Journal of the American Statistical Association 83 (401): 231–41.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Johannes Gussenbauer, Eileen Vattheuer, Statistics Austria</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/statistikat/surveysd" class="external-link">surveysd</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/openmp-utils.html" class="external-link">setDTthreads</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="demo.eusilc.html">demo.eusilc</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>,prettyNames <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">[</span>,<span class="va">N.households</span><span class="op">:=</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/duplicated.html" class="external-link">uniqueN</a></span><span class="op">(</span><span class="va">hid</span><span class="op">)</span>,by<span class="op">=</span><span class="va">region</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          hid  hsize        region    pid       age gender   ecoStat citizenship</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;int&gt; &lt;fctr&gt;        &lt;fctr&gt;  &lt;int&gt;    &lt;fctr&gt; &lt;fctr&gt;    &lt;fctr&gt;      &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:     1      3         Tyrol    101   (25,45] female part time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:     1      3         Tyrol    102   (25,45]   male full time       Other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:     1      3         Tyrol    103 (-Inf,16]   male      &lt;NA&gt;        &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:     2      4         Tyrol    201   (25,45] female  domestic          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:     2      4         Tyrol    202   (25,45]   male full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823:  5997      4 Lower Austria 599704 (-Inf,16] female education          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824:  5998      1 Upper Austria 599801   (25,45] female full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825:  5999      1         Tyrol 599901   (25,45]   male full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826:  6000      2         Tyrol 600001   (45,65]   male full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:  6000      2         Tyrol 600002   (45,65] female  disabled          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          py010n py050n  py090n py100n py110n py120n py130n py140n hy040n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;num&gt;  &lt;num&gt;   &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:  9756.25      0    0.00      0      0      0      0      0 4273.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 12471.60      0    0.00      0      0      0      0      0 4273.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:       NA     NA      NA     NA     NA     NA     NA     NA 4273.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 12487.03      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 42821.23      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823:     0.00      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824: 13962.56      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825: 14685.18      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826: 20606.82      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:     0.00      0 3825.63      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         hy050n hy070n hy080n hy090n hy110n hy130n hy145n  eqSS eqIncome</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt; &lt;num&gt;    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1: 2428.11      0      0  33.39      0      0      0   1.8 16090.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 2428.11      0      0  33.39      0      0      0   1.8 16090.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3: 2428.11      0      0  33.39      0      0      0   1.8 16090.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 1549.72      0      0   2.13      0      0      0   2.1 27076.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 1549.72      0      0   2.13      0      0      0   2.1 27076.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823: 1955.19      0      0   0.00      0      0      0   2.5 26508.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824:    0.00      0      0 424.85      0      0      0   1.0 14387.41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825:    0.00      0      0 120.65      0      0      0   1.0 14805.83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826:    0.00      0      0   0.00      0      0      0   1.5 16288.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:    0.00      0      0   0.00      0      0      0   1.5 16288.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           db090  pWeight  year povertyRisk N.households</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;num&gt;    &lt;num&gt; &lt;num&gt;      &lt;lgcl&gt;        &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1: 504.5696 504.5696  2010       FALSE          496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 504.5696 504.5696  2010       FALSE          496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3: 504.5696 504.5696  2010       FALSE          496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 493.3824 493.3824  2010       FALSE          496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 493.3824 493.3824  2010       FALSE          496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823: 556.4260 556.4260  2010       FALSE         1131</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824: 643.2557 643.2557  2010       FALSE         1068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825: 679.7288 679.7288  2010       FALSE          496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826: 567.1544 567.1544  2010       FALSE          496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827: 567.1544 567.1544  2010       FALSE          496</span>
<span class="r-in"><span><span class="va">eusilc.bootstrap</span> <span class="op">&lt;-</span> <span class="fu">rescaled.bootstrap</span><span class="op">(</span><span class="va">eusilc</span>,REP<span class="op">=</span><span class="fl">10</span>,strata<span class="op">=</span><span class="st">"region"</span>,</span></span>
<span class="r-in"><span>                                       cluster<span class="op">=</span><span class="st">"hid"</span>,fpc<span class="op">=</span><span class="st">"N.households"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">[</span>,<span class="va">new_strata</span><span class="op">:=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">region</span>,<span class="va">hsize</span>,sep<span class="op">=</span><span class="st">"_"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          hid  hsize        region    pid       age gender   ecoStat citizenship</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;int&gt; &lt;fctr&gt;        &lt;fctr&gt;  &lt;int&gt;    &lt;fctr&gt; &lt;fctr&gt;    &lt;fctr&gt;      &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:     1      3         Tyrol    101   (25,45] female part time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:     1      3         Tyrol    102   (25,45]   male full time       Other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:     1      3         Tyrol    103 (-Inf,16]   male      &lt;NA&gt;        &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:     2      4         Tyrol    201   (25,45] female  domestic          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:     2      4         Tyrol    202   (25,45]   male full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823:  5997      4 Lower Austria 599704 (-Inf,16] female education          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824:  5998      1 Upper Austria 599801   (25,45] female full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825:  5999      1         Tyrol 599901   (25,45]   male full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826:  6000      2         Tyrol 600001   (45,65]   male full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:  6000      2         Tyrol 600002   (45,65] female  disabled          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          py010n py050n  py090n py100n py110n py120n py130n py140n hy040n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;num&gt;  &lt;num&gt;   &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:  9756.25      0    0.00      0      0      0      0      0 4273.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 12471.60      0    0.00      0      0      0      0      0 4273.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:       NA     NA      NA     NA     NA     NA     NA     NA 4273.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 12487.03      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 42821.23      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823:     0.00      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824: 13962.56      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825: 14685.18      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826: 20606.82      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:     0.00      0 3825.63      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         hy050n hy070n hy080n hy090n hy110n hy130n hy145n  eqSS eqIncome</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt; &lt;num&gt;    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1: 2428.11      0      0  33.39      0      0      0   1.8 16090.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 2428.11      0      0  33.39      0      0      0   1.8 16090.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3: 2428.11      0      0  33.39      0      0      0   1.8 16090.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 1549.72      0      0   2.13      0      0      0   2.1 27076.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 1549.72      0      0   2.13      0      0      0   2.1 27076.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823: 1955.19      0      0   0.00      0      0      0   2.5 26508.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824:    0.00      0      0 424.85      0      0      0   1.0 14387.41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825:    0.00      0      0 120.65      0      0      0   1.0 14805.83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826:    0.00      0      0   0.00      0      0      0   1.5 16288.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:    0.00      0      0   0.00      0      0      0   1.5 16288.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           db090  pWeight  year povertyRisk N.households      new_strata</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;num&gt;    &lt;num&gt; &lt;num&gt;      &lt;lgcl&gt;        &lt;int&gt;          &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1: 504.5696 504.5696  2010       FALSE          496         Tyrol_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 504.5696 504.5696  2010       FALSE          496         Tyrol_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3: 504.5696 504.5696  2010       FALSE          496         Tyrol_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 493.3824 493.3824  2010       FALSE          496         Tyrol_4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 493.3824 493.3824  2010       FALSE          496         Tyrol_4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823: 556.4260 556.4260  2010       FALSE         1131 Lower Austria_4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824: 643.2557 643.2557  2010       FALSE         1068 Upper Austria_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825: 679.7288 679.7288  2010       FALSE          496         Tyrol_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826: 567.1544 567.1544  2010       FALSE          496         Tyrol_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827: 567.1544 567.1544  2010       FALSE          496         Tyrol_2</span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">[</span>,<span class="va">N.housholds</span><span class="op">:=</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/duplicated.html" class="external-link">uniqueN</a></span><span class="op">(</span><span class="va">hid</span><span class="op">)</span>,by<span class="op">=</span><span class="va">new_strata</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          hid  hsize        region    pid       age gender   ecoStat citizenship</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;int&gt; &lt;fctr&gt;        &lt;fctr&gt;  &lt;int&gt;    &lt;fctr&gt; &lt;fctr&gt;    &lt;fctr&gt;      &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:     1      3         Tyrol    101   (25,45] female part time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:     1      3         Tyrol    102   (25,45]   male full time       Other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:     1      3         Tyrol    103 (-Inf,16]   male      &lt;NA&gt;        &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:     2      4         Tyrol    201   (25,45] female  domestic          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:     2      4         Tyrol    202   (25,45]   male full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823:  5997      4 Lower Austria 599704 (-Inf,16] female education          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824:  5998      1 Upper Austria 599801   (25,45] female full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825:  5999      1         Tyrol 599901   (25,45]   male full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826:  6000      2         Tyrol 600001   (45,65]   male full time          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:  6000      2         Tyrol 600002   (45,65] female  disabled          AT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          py010n py050n  py090n py100n py110n py120n py130n py140n hy040n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;num&gt;  &lt;num&gt;   &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:  9756.25      0    0.00      0      0      0      0      0 4273.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 12471.60      0    0.00      0      0      0      0      0 4273.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:       NA     NA      NA     NA     NA     NA     NA     NA 4273.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 12487.03      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 42821.23      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823:     0.00      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824: 13962.56      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825: 14685.18      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826: 20606.82      0    0.00      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:     0.00      0 3825.63      0      0      0      0      0    0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         hy050n hy070n hy080n hy090n hy110n hy130n hy145n  eqSS eqIncome</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt; &lt;num&gt;    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1: 2428.11      0      0  33.39      0      0      0   1.8 16090.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 2428.11      0      0  33.39      0      0      0   1.8 16090.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3: 2428.11      0      0  33.39      0      0      0   1.8 16090.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 1549.72      0      0   2.13      0      0      0   2.1 27076.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 1549.72      0      0   2.13      0      0      0   2.1 27076.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823: 1955.19      0      0   0.00      0      0      0   2.5 26508.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824:    0.00      0      0 424.85      0      0      0   1.0 14387.41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825:    0.00      0      0 120.65      0      0      0   1.0 14805.83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826:    0.00      0      0   0.00      0      0      0   1.5 16288.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:    0.00      0      0   0.00      0      0      0   1.5 16288.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           db090  pWeight  year povertyRisk N.households      new_strata</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;num&gt;    &lt;num&gt; &lt;num&gt;      &lt;lgcl&gt;        &lt;int&gt;          &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1: 504.5696 504.5696  2010       FALSE          496         Tyrol_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 504.5696 504.5696  2010       FALSE          496         Tyrol_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3: 504.5696 504.5696  2010       FALSE          496         Tyrol_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 493.3824 493.3824  2010       FALSE          496         Tyrol_4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 493.3824 493.3824  2010       FALSE          496         Tyrol_4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823: 556.4260 556.4260  2010       FALSE         1131 Lower Austria_4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824: 643.2557 643.2557  2010       FALSE         1068 Upper Austria_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825: 679.7288 679.7288  2010       FALSE          496         Tyrol_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826: 567.1544 567.1544  2010       FALSE          496         Tyrol_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827: 567.1544 567.1544  2010       FALSE          496         Tyrol_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        N.housholds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:          79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:          79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:          79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:         102</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:         102</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14823:         169</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14824:         262</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14825:         118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14826:         149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14827:         149</span>
<span class="r-in"><span><span class="va">eusilc.bootstrap</span> <span class="op">&lt;-</span> <span class="fu">rescaled.bootstrap</span><span class="op">(</span><span class="va">eusilc</span>,REP<span class="op">=</span><span class="fl">10</span>,strata<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"new_strata"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                       cluster<span class="op">=</span><span class="st">"hid"</span>,fpc<span class="op">=</span><span class="st">"N.households"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Gussenbauer, Alexander Kowarik, Eileen Vattheuer, Gregor de Cillia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

