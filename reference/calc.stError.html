<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calcualte point estimates and their standard errors using bootstrap weights. — calc.stError • surveysd</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Calcualte point estimates and their standard errors using bootstrap weights. — calc.stError"><meta name="description" content="Calculate point estimates as well as standard errors of variables in surveys.
Standard errors are estimated using bootstrap weights (see draw.bootstrap
and recalib). In addition the standard error of an estimate can be
calcualted using the survey data for 3 or more consecutive periods, which
results in a reduction of the standard error."><meta property="og:description" content="Calculate point estimates as well as standard errors of variables in surveys.
Standard errors are estimated using bootstrap weights (see draw.bootstrap
and recalib). In addition the standard error of an estimate can be
calcualted using the survey data for 3 or more consecutive periods, which
results in a reduction of the standard error."><meta property="og:image" content="https://statistikat.github.io/surveysd/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">surveysd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/surveysd.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/error_estimation.html">Error estimation</a></li>
    <li><a class="dropdown-item" href="../articles/ipf.html">Iterative Proportional Fitting</a></li>
    <li><a class="dropdown-item" href="../articles/methodology.html">Methodology</a></li>
    <li><a class="dropdown-item" href="../articles/raowu.html">Rao-Wu Bootstrap in surveysd</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statistikat/surveysd/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calcualte point estimates and their standard errors using bootstrap weights.</h1>
      <small class="dont-index">Source: <a href="https://github.com/statistikat/surveysd/blob/master/R/calc.stError.R" class="external-link"><code>R/calc.stError.R</code></a></small>
      <div class="d-none name"><code>calc.stError.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate point estimates as well as standard errors of variables in surveys.
Standard errors are estimated using bootstrap weights (see <a href="draw.bootstrap.html">draw.bootstrap</a>
and <a href="recalib.html">recalib</a>). In addition the standard error of an estimate can be
calcualted using the survey data for 3 or more consecutive periods, which
results in a reduction of the standard error.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc.stError</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">dat</span>, <span class="st">"weights"</span><span class="op">)</span>,</span>
<span>  b.weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">dat</span>, <span class="st">"b.rep"</span><span class="op">)</span>,</span>
<span>  period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">dat</span>, <span class="st">"period"</span><span class="op">)</span>,</span>
<span>  var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fun <span class="op">=</span> <span class="va">weightedRatio</span>,</span>
<span>  relative.share <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group.diff <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fun.adjust.var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adjust.var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  period.diff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  period.mean <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bias <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  size.limit <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  cv.limit <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  p <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add.arg <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  national <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dat">dat<a class="anchor" aria-label="anchor" href="#arg-dat"></a></dt>
<dd><p>either data.frame or data.table containing the survey data.
Surveys can be a panel survey or rotating panel survey, but does not need
to be. For rotating panel survey bootstrap weights can be created using
<a href="draw.bootstrap.html">draw.bootstrap</a> and <a href="recalib.html">recalib</a>.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>character specifying the name of the column in <code>dat</code>
containing the original sample weights. Used to calculate point estimates.</p></dd>


<dt id="arg-b-weights">b.weights<a class="anchor" aria-label="anchor" href="#arg-b-weights"></a></dt>
<dd><p>character vector specifying the names of the columns in
<code>dat</code> containing bootstrap weights. Used to calculate standard errors.</p></dd>


<dt id="arg-period">period<a class="anchor" aria-label="anchor" href="#arg-period"></a></dt>
<dd><p>character specifying the name of the column in <code>dat</code>
containing the sample periods.</p></dd>


<dt id="arg-var">var<a class="anchor" aria-label="anchor" href="#arg-var"></a></dt>
<dd><p>character vector containing variable names in <code>dat</code> on which <code>fun</code>
shall be applied for each sample period. If <code>var = NULL</code> the results will
reflect the sum of <code>weights</code>.</p></dd>


<dt id="arg-fun">fun<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>function which will be applied on <code>var</code> for each sample period.
Predefined functions are <a href="PointEstimates.html">weightedRatio</a>, <a href="PointEstimates.html">weightedSum</a>, but can also take
any other function which returns a double or integer and uses weights as
its second argument.</p></dd>


<dt id="arg-relative-share">relative.share<a class="anchor" aria-label="anchor" href="#arg-relative-share"></a></dt>
<dd><p>boolean, if <code>TRUE</code> point estimates resulting from <code>fun</code> will be
divided by the point estimate at population level per <code>period</code>.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>character vectors or list of character vectors containig
variables in <code>dat</code>. For each list entry <code>dat</code> will be split in subgroups
according to the containing variables as well as <code>period</code>. The
pointestimates are then estimated for each subgroup seperately. If
<code>group=NULL</code> the data will split into sample periods by default.</p></dd>


<dt id="arg-group-diff">group.diff<a class="anchor" aria-label="anchor" href="#arg-group-diff"></a></dt>
<dd><p>boolen, if <code>TRUE</code> differences and the standard error
between groups defined in <code>group</code> are calculated. See details for more explanations.</p></dd>


<dt id="arg-fun-adjust-var">fun.adjust.var<a class="anchor" aria-label="anchor" href="#arg-fun-adjust-var"></a></dt>
<dd><p>can be either <code>NULL</code> or a function. This argument can
be used to apply a function for each <code>period</code> and bootstrap weight to the
data. The resulting estimates will be passed down to <code>fun</code>. See details for
more explanations.</p></dd>


<dt id="arg-adjust-var">adjust.var<a class="anchor" aria-label="anchor" href="#arg-adjust-var"></a></dt>
<dd><p>can be either <code>NULL</code> or a character specifying the first
argument in <code>fun.adjust.var</code>.</p></dd>


<dt id="arg-period-diff">period.diff<a class="anchor" aria-label="anchor" href="#arg-period-diff"></a></dt>
<dd><p>character vectors, defining periods for which the
differences in the point estimate as well it's standard error is
calculated. Each entry must have the form of <code>"period1 - period2"</code>. Can be
NULL</p></dd>


<dt id="arg-period-mean">period.mean<a class="anchor" aria-label="anchor" href="#arg-period-mean"></a></dt>
<dd><p>odd integer, defining the range of periods over which the
sample mean of point estimates is additionally calcualted.</p></dd>


<dt id="arg-bias">bias<a class="anchor" aria-label="anchor" href="#arg-bias"></a></dt>
<dd><p>boolean, if <code>TRUE</code> the sample mean over the point estimates of
the bootstrap weights is returned.</p></dd>


<dt id="arg-size-limit">size.limit<a class="anchor" aria-label="anchor" href="#arg-size-limit"></a></dt>
<dd><p>integer defining a lower bound on the number of
observations on <code>dat</code> in each group defined by <code>period</code> and the entries in
<code>group</code>. Warnings are returned if the number of observations in a subgroup
falls below <code>size.limit</code>. In addition the concerned groups are available in
the function output.</p></dd>


<dt id="arg-cv-limit">cv.limit<a class="anchor" aria-label="anchor" href="#arg-cv-limit"></a></dt>
<dd><p>non-negativ value defining a upper bound for the standard
error in relation to the point estimate. If this relation exceed
<code>cv.limit</code>, for a point estimate, they are flagged and available in the
function output.</p></dd>


<dt id="arg-p">p<a class="anchor" aria-label="anchor" href="#arg-p"></a></dt>
<dd><p>numeric vector containing values between 0 and 1. Defines which
quantiles for the distribution of <code>var</code> are additionally estimated.</p></dd>


<dt id="arg-add-arg">add.arg<a class="anchor" aria-label="anchor" href="#arg-add-arg"></a></dt>
<dd><p>additional arguments which will be passed to fun. Can be
either a named list or vector. The names of the object correspond to the
function arguments and the values to column names in dat, see also
examples.</p></dd>


<dt id="arg-national">national<a class="anchor" aria-label="anchor" href="#arg-national"></a></dt>
<dd><p>DEPRECATED use <code>relative.share</code> instead! boolean, if TRUE point estimates resulting from fun will be
divided by the point estimate at the national level.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a list containing:</p><ul><li><p><code>Estimates</code>: data.table containing period differences and/or k period
averages for estimates of
<code>fun</code> applied to <code>var</code> as well as the corresponding standard errors, which
are calculated using the bootstrap weights. In addition the sample size,
<code>n</code>, and poplutaion size for each group is added to the output.</p></li>
<li><p><code>smallGroups</code>: data.table containing groups for which the number of
observation falls below <code>size.limit</code>.</p></li>
<li><p><code>cvHigh</code>: data.table containing a boolean variable which indicates for each
estimate if the estimated standard error exceeds <code>cv.limit</code>.</p></li>
<li><p><code>stEDecrease</code>: data.table indicating for each estimate the theoretical
increase in sample size which is gained when averaging over k periods. Only
returned if <code>period.mean</code> is not <code>NULL</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>calc.stError</code> takes survey data (<code>dat</code>) and returns point estimates
as well as their standard Errors defined by <code>fun</code> and <code>var</code> for each sample
period in <code>dat</code>. <code>dat</code> must be household data where household members
correspond to multiple rows with the same household identifier. The data
should at least contain the following columns:</p><ul><li><p>Column indicating the sample period;</p></li>
<li><p>Column indicating the household ID;</p></li>
<li><p>Column containing the household sample weights;</p></li>
<li><p>Columns which contain the bootstrap weights (see output of <a href="recalib.html">recalib</a>);</p></li>
<li><p>Columns listed in <code>var</code> as well as in <code>group</code></p></li>
</ul><p>For each variable in <code>var</code> as well as sample period the function <code>fun</code> is
applied using the original as well as the bootstrap sample weights.<br>
The point estimate is then selected as the result of <code>fun</code> when using the
original sample weights and it's standard error is estimated with the result
of <code>fun</code> using the bootstrap sample weights. <br><br><code>fun</code> can be any function which returns a double or integer and uses sample
weights as it's second argument. The predifined options are <code>weightedRatio</code>
and <code>weightedSum</code>.<br><br>
For the option <code>weightedRatio</code> a weighted ratio (in \<!-- %) of \code{var} is -->
calculated for <code>var</code> equal to 1, e.g
<code>sum(weight[var==1])/sum(weight[!is.na(var)])*100</code>.<br>
Additionally using the option <code>national=TRUE</code> the weighted ratio (in \<!-- %) is -->
divided by the weighted ratio at the national level for each <code>period</code>.
<br>
If <code>group</code> is not <code>NULL</code> but a vector of variables from <code>dat</code> then <code>fun</code> is
applied on each subset of <code>dat</code> defined by all combinations of values in
<code>group</code>.<br>
For instance if <code>group = "sex"</code> with "sex" having the values "Male" and
"Female" in <code>dat</code> the point estimate and standard error is calculated on the
subsets of <code>dat</code> with only "Male" or "Female" value for "sex". This is done
for each value of <code>period</code>. For variables in <code>group</code> which have <code>NA</code>s in
<code>dat</code> the rows containing the missings will be discarded. <br>
When <code>group</code> is a list of character vectors, subsets of <code>dat</code> and the
following estimation of the point estimate, including the estimate for the
standard error, are calculated for each list entry.<br><br>
If <code>group.diff = TRUE</code> difference between groups definded by <code>group</code> are calculated.
Differences are only calculated within each variables of <code>group</code>,
e.g <code>group = c("gender", "region")</code> will calcualate estimates of each group and
also differences within <code>"gender"</code> and <code>"region"</code> seperately.
If grouping is done with multiple variables e.g <code>group = list(c("gender","region")</code>)
(~ grouping by <code>"gender"</code> x <code>"region"</code>) differences are calculated
only between groups where one of the grouping variables is different.
For instance the difference between <code>gender = "female" &amp; region = "Vienna"</code> and
<code>gender = "male" &amp; region = "Vienna"</code> OR <code>gender = "female" &amp; region = "Vienna"</code> and
<code>gender = "female" &amp; region = "Salzburg"</code> will be calculated.
The difference between <code>gender = "female" &amp; region = "Vienna"</code> and
<code>gender = "male" &amp; region = "Salzburg"</code> will not be calculated. The order of difference
is determined by order of value (alpha-numerical order) or
if grouping contains factor variables the factor levels determin the order.
<br>
The optional parameters <code>fun.adjust.var</code> and <code>adjust.var</code> can be used if the
values in <code>var</code> are dependent on the <code>weights</code>. As is for instance the case
for the poverty thershhold calculated from EU-SILC.
In such a case an additional function can be supplied using <code>fun.adjust.var</code>
as well as its first argument <code>adjust.var</code>, which needs to be part of the
data set <code>dat</code>. Then, before applying <code>fun</code> on variable <code>var</code>
for all <code>period</code> and groups, the function <code>fun.adjust.var</code> is applied to
<code>adjust.var</code> using each of the bootstrap weights seperately (NOTE: weight is
used as the second argument of <code>fun.adjust.var</code>).
Thus creating i=1,...,<code>length(b.weights)</code> additional variables.
For applying <code>fun</code> on <code>var</code> the estimates for the bootstrap replicate will
now use each of the corresponding new additional variables. So instead of
$$fun(var,weights,...),fun(var,b.weights[1],...),
fun(var,b.weights[2],...),...$$
the function <code>fun</code> will be applied in the way
$$fun(var,weights,...),fun(var.1,b.weights[1],...),fun(var.2,
b.weights[2],...),...$$</p>
<p>where <code>var.1</code>, <code>var.2</code>, <code>...</code> correspond to the estimates resulting from
<code>fun.adjust.var</code> and <code>adjust.var</code>.
NOTE: This procedure is especially usefull if the <code>var</code> is dependent on
<code>weights</code> and <code>fun</code> is applied on subgroups of the data set. Then it is not
possible to capture this procedure with <code>fun</code> and <code>var</code>, see examples for a
more hands on explanation.
<br>
When defining <code>period.diff</code> the difference of point estimates between periods
as well their standard errors are calculated.<br>
The entries in <code>period.diff</code> must have the form of <code>"period1 - period2"</code>
which means that the results of the point estimates for <code>period2</code> will be
substracted from the results of the point estimates for <code>period1</code>.<br><br>
Specifying <code>period.mean</code> leads to an improvement in standard error by
averaging the results for the point estimates, using the bootstrap weights,
over <code>period.mean</code> periods.
Setting, for instance, <code>period.mean = 3</code> the results in averaging these
results over each consecutive set of 3 periods.<br>
Estimating the standard error over these averages gives an improved estimate
of the standard error for the central period, which was used for
averaging.<br>
The averaging of the results is also applied in differences of point
estimates. For instance defining <code>period.diff = "2015-2009"</code> and
<code>period.mean = 3</code>
the differences in point estimates of 2015 and 2009, 2016 and 2010 as well as
2014 and 2008 are calcualated and finally the average over these 3
differences is calculated.
The periods set in <code>period.diff</code> are always used as the middle periods around
which the mean over <code>period.mean</code> years is build.
<br>
Setting <code>bias</code> to <code>TRUE</code> returns the calculation of a mean over the results
from the bootstrap replicates. In  the output the corresponding columns is
labeled <em>_mean</em> at the end.<br><br>
If <code>fun</code> needs more arguments they can be supplied in <code>add.arg</code>. This can
either be a named list or vector.<br><br>
The parameter <code>size.limit</code> indicates a lower bound of the sample size for
subsets in <code>dat</code> created by <code>group</code>. If the sample size of a subset falls
below <code>size.limit</code> a warning will be displayed.<br>
In addition all subsets for which this is the case can be selected from the
output of <code>calc.stError</code> with <code>$smallGroups</code>.<br>
With the parameter <code>cv.limit</code> one can set an upper bound on the coefficient
of variantion. Estimates which exceed this bound are flagged with <code>TRUE</code> and
are available in the function output with <code>$cvHigh</code>.
<code>cv.limit</code> must be a positive integer and is treated internally as \<!-- %, e.g. -->
for <code>cv.limit=1</code> the estimate will be flagged if the coefficient of
variantion exceeds 1\<!-- %.\cr -->
<br>
When specifying <code>period.mean</code>, the decrease in standard error for choosing
this method is internally calcualted and a rough estimate for an implied
increase in sample size is available in the output with <code>$stEDecrease</code>.
The rough estimate for the increase in sample size uses the fact that for a
sample of size \(n\) the sample estimate for the standard error of most
point estimates converges with a factor \(1/\sqrt{n}\) against the true
standard error \(\sigma\).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="draw.bootstrap.html">draw.bootstrap</a> <br><a href="recalib.html">recalib</a></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Johannes Gussenbauer, Alexander Kowarik, Statistics Austria</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Import data and calibrate</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/statistikat/surveysd" class="external-link">surveysd</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/openmp-utils.html" class="external-link">setDTthreads</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span> <span class="op">&lt;-</span> <span class="fu"><a href="demo.eusilc.html">demo.eusilc</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">4</span>,prettyNames <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat_boot</span> <span class="op">&lt;-</span> <span class="fu"><a href="draw.bootstrap.html">draw.bootstrap</a></span><span class="op">(</span><span class="va">eusilc</span>, REP <span class="op">=</span> <span class="fl">3</span>, hid <span class="op">=</span> <span class="st">"hid"</span>, weights <span class="op">=</span> <span class="st">"pWeight"</span>,</span></span>
<span class="r-in"><span>                           strata <span class="op">=</span> <span class="st">"region"</span>, period <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat_boot_calib</span> <span class="op">&lt;-</span> <span class="fu"><a href="recalib.html">recalib</a></span><span class="op">(</span><span class="va">dat_boot</span>, conP.var <span class="op">=</span> <span class="st">"gender"</span>, conH.var <span class="op">=</span> <span class="st">"region"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Iteration stopped after 1 steps</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Convergence reached</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Iteration stopped after 1 steps</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Convergence reached</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Iteration stopped after 2 steps</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Convergence reached</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate weightedRatio for povertyRisk per period</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">err.est</span> <span class="op">&lt;-</span> <span class="fu">calc.stError</span><span class="op">(</span><span class="va">dat_boot_calib</span>, var <span class="op">=</span> <span class="st">"povertyRisk"</span>,</span></span>
<span class="r-in"><span>                        fun <span class="op">=</span> <span class="va">weightedRatio</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">err.est</span><span class="op">$</span><span class="va">Estimates</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;year, n, N, estimate_type&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year     n       N estimate_type val_povertyRisk stE_povertyRisk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;int&gt;   &lt;num&gt;        &lt;char&gt;           &lt;num&gt;           &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  2010 14827 8182222        direct        14.44422      0.09717037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:  2011 14827 8182222        direct        14.77393      0.26302993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:  2012 14827 8182222        direct        15.04515      0.58659617</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:  2013 14827 8182222        direct        14.89013      0.56860745</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate weightedRatio for povertyRisk and fraction of one-person</span></span></span>
<span class="r-in"><span><span class="co"># households per period</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dat_boot_calib</span><span class="op">[</span>, <span class="va">onePerson</span> <span class="op">:=</span> <span class="va">.N</span> <span class="op">==</span> <span class="fl">1</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">year</span>, <span class="va">hid</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          hid  hsize        region     pid       age gender   ecoStat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;int&gt; &lt;fctr&gt;        &lt;fctr&gt;   &lt;int&gt;    &lt;fctr&gt; &lt;fctr&gt;    &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:     1      3         Tyrol     101   (25,45] female part time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:     1      3         Tyrol     102   (25,45]   male full time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:     1      3         Tyrol     103 (-Inf,16]   male      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:     2      4         Tyrol     201   (25,45] female  domestic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:     2      4         Tyrol     202   (25,45]   male full time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59304:  8999      4 Lower Austria  899904 (-Inf,16] female education</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59305: 10500      1 Upper Austria 1050001   (25,45] female full time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59306:  5999      1         Tyrol  599901   (25,45]   male full time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59307:  7500      2         Tyrol  750001   (45,65]   male full time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59308:  7500      2         Tyrol  750002   (45,65] female  disabled</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        citizenship   py010n py050n  py090n py100n py110n py120n py130n py140n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;fctr&gt;    &lt;num&gt;  &lt;num&gt;   &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:          AT  9756.25      0    0.00      0      0      0      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:       Other 12471.60      0    0.00      0      0      0      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:        &lt;NA&gt;       NA     NA      NA     NA     NA     NA     NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:          AT 12487.03      0    0.00      0      0      0      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:          AT 42821.23      0    0.00      0      0      0      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59304:          AT     0.00      0    0.00      0      0      0      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59305:          AT 13962.56      0    0.00      0      0      0      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59306:          AT 14685.18      0    0.00      0      0      0      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59307:          AT 20606.82      0    0.00      0      0      0      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59308:          AT     0.00      0 3825.63      0      0      0      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        hy040n  hy050n hy070n hy080n hy090n hy110n hy130n hy145n  eqSS  eqIncome</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;num&gt;   &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt; &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1: 4273.9 2428.11      0      0  33.39      0      0      0   1.8 16090.694</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 4273.9 2428.11      0      0  33.39      0      0      0   1.8 16090.694</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3: 4273.9 2428.11      0      0  33.39      0      0      0   1.8 16090.694</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:    0.0 1549.72      0      0   2.13      0      0      0   2.1 27076.243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:    0.0 1549.72      0      0   2.13      0      0      0   2.1 27076.243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59304:    0.0 1955.19      0      0   0.00      0      0      0   2.5 26970.023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59305:    0.0    0.00      0      0 424.85      0      0      0   1.0  6923.625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59306:    0.0    0.00      0      0 120.65      0      0      0   1.0 14805.830</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59307:    0.0    0.00      0      0   0.00      0      0      0   1.5 24680.877</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59308:    0.0    0.00      0      0   0.00      0      0      0   1.5 24680.877</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           db090  pWeight  year povertyRisk           w1           w2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;num&gt;    &lt;num&gt; &lt;num&gt;      &lt;lgcl&gt;        &lt;num&gt;        &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1: 504.5696 504.5696  2010       FALSE    0.4486785 1008.6905620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2: 504.5696 504.5696  2010       FALSE    0.4486785 1008.6905620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3: 504.5696 504.5696  2010       FALSE    0.4486785 1008.6905620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4: 493.3824 493.3824  2010       FALSE    0.4387304  986.3259754</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5: 493.3824 493.3824  2010       FALSE    0.4387304  986.3259754</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59304: 556.4260 556.4260  2013       FALSE 1112.8575590    0.9776065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59305: 643.2557 643.2557  2013        TRUE 1285.9053590 1285.9053590</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59306: 679.7288 679.7288  2013       FALSE 1358.8531918 1358.8531918</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59307: 567.1544 567.1544  2013       FALSE 1133.8043941    0.5043307</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59308: 567.1544 567.1544  2013       FALSE 1133.8043941    0.5043307</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  w3 onePerson</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;num&gt;    &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:    0.4500458     FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:    0.4500458     FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:    0.4500458     FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:    0.4405495     FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:    0.4405495     FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59304:    0.9824473     FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59305: 1304.9907969      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59306: 1352.1421364      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59307: 1139.4185737     FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59308: 1139.4185737     FALSE</span>
<span class="r-in"><span><span class="va">err.est</span> <span class="op">&lt;-</span> <span class="fu">calc.stError</span><span class="op">(</span><span class="va">dat_boot_calib</span>, var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"povertyRisk"</span>, <span class="st">"onePerson"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        fun <span class="op">=</span> <span class="va">weightedRatio</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">err.est</span><span class="op">$</span><span class="va">Estimates</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;year, n, N, estimate_type&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year     n       N estimate_type val_povertyRisk stE_povertyRisk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;int&gt;   &lt;num&gt;        &lt;char&gt;           &lt;num&gt;           &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  2010 14827 8182222        direct        14.44422       0.2742652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:  2011 14827 8182222        direct        14.77393       0.4489320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:  2012 14827 8182222        direct        15.04515       0.6017777</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:  2013 14827 8182222        direct        14.89013       0.5658570</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    val_onePerson stE_onePerson</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;num&gt;         &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      14.85737     0.2742652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      14.85737     0.4489320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      14.85737     0.6017777</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      14.85737     0.5658570</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate weightedRatio for povertyRisk per period and gender and</span></span></span>
<span class="r-in"><span><span class="co"># period x region x gender </span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"region"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">err.est</span> <span class="op">&lt;-</span> <span class="fu">calc.stError</span><span class="op">(</span><span class="va">dat_boot_calib</span>, var <span class="op">=</span> <span class="st">"povertyRisk"</span>,</span></span>
<span class="r-in"><span>                        fun <span class="op">=</span> <span class="va">weightedRatio</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">err.est</span><span class="op">$</span><span class="va">Estimates</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;year, n, N, gender, region, estimate_type&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      year     n         N gender        region estimate_type val_povertyRisk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;num&gt; &lt;int&gt;     &lt;num&gt; &lt;fctr&gt;        &lt;fctr&gt;        &lt;char&gt;           &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:  2010   261  122741.8   male    Burgenland        direct       17.414524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:  2010   288  137822.2 female    Burgenland        direct       21.432598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:  2010   359  182732.9   male    Vorarlberg        direct       12.973259</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:  2010   374  194622.1 female    Vorarlberg        direct       19.883637</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:  2010   440  253143.7   male      Salzburg        direct        9.156964</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  2010   484  282307.3 female      Salzburg        direct       17.939382</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  2010   517  268581.4   male     Carinthia        direct       10.552149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:  2010   561  295066.6 female     Carinthia        direct       15.392924</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:  2010   650  339566.5   male         Tyrol        direct       12.857542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:  2010   667  362332.5 female         Tyrol        direct       17.604861</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:  2010  1128  571011.7   male        Styria        direct       11.671247</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:  2010  1132  774405.4   male        Vienna        direct       15.590616</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:  2010  1167  596033.3 female        Styria        direct       16.964539</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:  2010  1190  824525.6 female        Vienna        direct       18.778813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:  2010  1363  684272.5   male Upper Austria        direct        9.074690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:  2010  1387  772593.2 female Lower Austria        direct       16.372949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:  2010  1417  783115.8   male Lower Austria        direct       11.348283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:  2010  1442  737347.5 female Upper Austria        direct       12.574206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:  2010  7267 3979571.7   male          &lt;NA&gt;        direct       12.026600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:  2010  7560 4202650.3 female          &lt;NA&gt;        direct       16.733508</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:  2010 14827 8182222.0   &lt;NA&gt;          &lt;NA&gt;        direct       14.444218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:  2011   261  122741.8   male    Burgenland        direct       16.465679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:  2011   288  137822.2 female    Burgenland        direct       21.245704</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:  2011   359  182732.9   male    Vorarlberg        direct       12.590109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25:  2011   374  194622.1 female    Vorarlberg        direct       17.125259</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26:  2011   440  253143.7   male      Salzburg        direct       11.189644</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27:  2011   484  282307.3 female      Salzburg        direct       18.213248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28:  2011   517  268581.4   male     Carinthia        direct       12.789630</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29:  2011   561  295066.6 female     Carinthia        direct       16.745958</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30:  2011   650  339566.5   male         Tyrol        direct       12.531181</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31:  2011   667  362332.5 female         Tyrol        direct       16.522466</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32:  2011  1128  571011.7   male        Styria        direct       10.163611</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33:  2011  1132  774405.4   male        Vienna        direct       16.616484</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34:  2011  1167  596033.3 female        Styria        direct       15.322461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35:  2011  1190  824525.6 female        Vienna        direct       18.582643</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36:  2011  1363  684272.5   male Upper Austria        direct       11.360200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37:  2011  1387  772593.2 female Lower Austria        direct       16.109340</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38:  2011  1417  783115.8   male Lower Austria        direct       12.419104</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39:  2011  1442  737347.5 female Upper Austria        direct       14.426605</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40:  2011  7267 3979571.7   male          &lt;NA&gt;        direct       12.819212</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41:  2011  7560 4202650.3 female          &lt;NA&gt;        direct       16.624882</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42:  2011 14827 8182222.0   &lt;NA&gt;          &lt;NA&gt;        direct       14.773925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43:  2012   261  122741.8   male    Burgenland        direct       16.005251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44:  2012   288  137822.2 female    Burgenland        direct       19.646025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45:  2012   359  182732.9   male    Vorarlberg        direct       12.650134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46:  2012   374  194622.1 female    Vorarlberg        direct       16.089942</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47:  2012   440  253143.7   male      Salzburg        direct       11.305057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48:  2012   484  282307.3 female      Salzburg        direct       18.150559</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49:  2012   517  268581.4   male     Carinthia        direct       14.157852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50:  2012   561  295066.6 female     Carinthia        direct       15.926182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51:  2012   650  339566.5   male         Tyrol        direct       15.104689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52:  2012   667  362332.5 female         Tyrol        direct       17.449297</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53:  2012  1128  571011.7   male        Styria        direct       11.019424</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54:  2012  1132  774405.4   male        Vienna        direct       16.099733</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55:  2012  1167  596033.3 female        Styria        direct       13.902894</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56:  2012  1190  824525.6 female        Vienna        direct       16.796126</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57:  2012  1363  684272.5   male Upper Austria        direct       13.557275</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58:  2012  1387  772593.2 female Lower Austria        direct       16.563011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59:  2012  1417  783115.8   male Lower Austria        direct       13.606128</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60:  2012  1442  737347.5 female Upper Austria        direct       15.494037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61:  2012  7267 3979571.7   male          &lt;NA&gt;        direct       13.760647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62:  2012  7560 4202650.3 female          &lt;NA&gt;        direct       16.261469</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 63:  2012 14827 8182222.0   &lt;NA&gt;          &lt;NA&gt;        direct       15.045149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 64:  2013   261  122741.8   male    Burgenland        direct       20.636575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 65:  2013   288  137822.2 female    Burgenland        direct       21.223485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66:  2013   359  182732.9   male    Vorarlberg        direct       12.311667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67:  2013   374  194622.1 female    Vorarlberg        direct       15.716327</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68:  2013   440  253143.7   male      Salzburg        direct       11.427862</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69:  2013   484  282307.3 female      Salzburg        direct       17.234804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70:  2013   517  268581.4   male     Carinthia        direct       12.594461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 71:  2013   561  295066.6 female     Carinthia        direct       13.368498</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72:  2013   650  339566.5   male         Tyrol        direct       14.564544</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 73:  2013   667  362332.5 female         Tyrol        direct       16.559763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 74:  2013  1128  571011.7   male        Styria        direct       11.942973</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75:  2013  1132  774405.4   male        Vienna        direct       16.144697</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76:  2013  1167  596033.3 female        Styria        direct       14.377224</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 77:  2013  1190  824525.6 female        Vienna        direct       17.419665</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 78:  2013  1363  684272.5   male Upper Austria        direct       13.461762</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 79:  2013  1387  772593.2 female Lower Austria        direct       14.978617</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 80:  2013  1417  783115.8   male Lower Austria        direct       13.710926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81:  2013  1442  737347.5 female Upper Austria        direct       15.272207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82:  2013  7267 3979571.7   male          &lt;NA&gt;        direct       13.889623</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83:  2013  7560 4202650.3 female          &lt;NA&gt;        direct       15.837536</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 84:  2013 14827 8182222.0   &lt;NA&gt;          &lt;NA&gt;        direct       14.890134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      year     n         N gender        region estimate_type val_povertyRisk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     stE_povertyRisk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:      1.80114297</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:      3.98487985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      2.85743423</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:      2.02772581</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:      1.19341262</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:      1.23333945</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      2.63295075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:      2.14202237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      3.59525590</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:      3.91619508</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:      2.92097946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:      0.78673540</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:      1.52199994</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:      0.67409478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:      0.69225655</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:      1.92491728</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:      1.59333413</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:      0.76976213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:      0.25881835</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:      0.08301422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:      0.09717037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:      2.33739810</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:      4.75414851</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:      0.88247079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25:      0.25150455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26:      1.45968774</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27:      3.60754353</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28:      2.35718347</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29:      2.03207382</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30:      0.25945406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31:      3.21205911</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32:      2.43338597</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33:      0.40714728</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34:      0.98340523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35:      1.19851700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36:      0.67172069</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37:      0.92271550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38:      1.29151542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39:      0.09950142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40:      0.26722965</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41:      0.50527230</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42:      0.26302993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43:      1.99865386</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44:      3.30843769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45:      1.13300719</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46:      1.55344020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47:      1.09122695</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48:      1.65011022</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49:      1.94219592</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50:      0.51339942</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51:      0.95642311</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52:      3.80559038</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53:      2.40692186</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54:      0.83293400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55:      1.03885207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56:      1.22455203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57:      0.45630614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58:      0.24858616</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59:      0.98438045</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60:      0.93603848</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61:      0.28753209</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62:      1.07548123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 63:      0.58659617</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 64:      5.68602226</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 65:      6.16681972</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66:      1.54832543</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67:      2.06678366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68:      1.00160285</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69:      1.82378643</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70:      3.04053281</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 71:      1.84065781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72:      1.16579682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 73:      4.45976234</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 74:      2.43764524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75:      0.12235697</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76:      2.09637836</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 77:      0.80321310</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 78:      1.24144631</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 79:      0.85367101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 80:      1.12765856</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81:      1.33824156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82:      0.17478534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83:      0.94362554</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 84:      0.56860745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     stE_povertyRisk</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use average over 3 periods for standard error estimation</span></span></span>
<span class="r-in"><span><span class="co"># and calculate estimate for difference of</span></span></span>
<span class="r-in"><span><span class="co"># period 2011 and 2012 inclulding standard errors</span></span></span>
<span class="r-in"><span><span class="va">period.diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2012-2011"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">err.est</span> <span class="op">&lt;-</span> <span class="fu">calc.stError</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">dat_boot_calib</span>, var <span class="op">=</span> <span class="st">"povertyRisk"</span>, fun <span class="op">=</span> <span class="va">weightedRatio</span>,</span></span>
<span class="r-in"><span>  period.diff <span class="op">=</span> <span class="va">period.diff</span>,  <span class="co"># &lt;- take difference of periods 2012 and 2011</span></span></span>
<span class="r-in"><span>  period.mean <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>  <span class="co"># &lt;- average over 3 periods</span></span></span>
<span class="r-in"><span><span class="va">err.est</span><span class="op">$</span><span class="va">Estimates</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;year, n, N, estimate_type&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              year     n       N                      estimate_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;char&gt; &lt;num&gt;   &lt;num&gt;                             &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           2010 14827 8182222                             direct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 2010_2011_2012 14827 8182222                     period average</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           2011 14827 8182222                             direct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 2011_2012_2013 14827 8182222                     period average</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:           2012 14827 8182222                             direct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:      2012-2011 14827 8182222                  period difference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7: 2012-2011_mean 14827 8182222 difference between period averages</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:           2013 14827 8182222                             direct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    val_povertyRisk stE_povertyRisk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              &lt;num&gt;           &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      14.4442182      0.09717037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      14.7544308      0.25290495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      14.7739255      0.26302993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      14.9030692      0.46096495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:      15.0451487      0.58659617</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:       0.2712233      0.33036670</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:       0.1486385      0.22191059</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:      14.8901335      0.56860745</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># for more examples see https://statistikat.github.io/surveysd/articles/error_estimation.html</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Gussenbauer, Alexander Kowarik, Eileen Vattheuer, Gregor de Cillia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

